import os

# --- CONFIGURATION ---
xml_folder = 'path/to/xml/folder'              # Folder with XMLs to merge
template_file = 'path/to/template.xml'         # Base XML file with "Replace Me"
output_file = 'path/to/output/merged.xml'      # Output path for final XML

# --- STEP 1: Read and merge XML files (skipping first 2 lines) ---
merged_content = ""
for filename in os.listdir(xml_folder):
    if filename.endswith('.xml'):
        file_path = os.path.join(xml_folder, filename)
        with open(file_path, 'r', encoding='utf-8') as f:
            lines = f.readlines()[2:]  # Skip first two lines
            merged_content += ''.join(lines).strip() + "\n"

# --- STEP 2: Read the template XML and replace the placeholder ---
with open(template_file, 'r', encoding='utf-8') as f:
    template_xml = f.read()

final_xml = template_xml.replace("Replace Me", merged_content.strip())

# --- STEP 3: Write final output ---
with open(output_file, 'w', encoding='utf-8') as f:
    f.write(final_xml)

print(f"Merged XML written to: {output_file}")
